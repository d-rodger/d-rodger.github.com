<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Android Emulator 2.2 and Android Market &mdash; Devslant</title>
  <meta name="author" content="Derek Rodger">






  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="http://devslant.com/favicon.png" rel="icon">

  <link href="http://devslant.com/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://devslant.com/">Devslant</a></h1>
    <h2>Obviously Obfuscated Originality</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<ul class="main-navigation">
      <li >
        <a href="http://devslant.com/category/learning.html">Learning</a>
      </li>
      <li >
        <a href="http://devslant.com/category/misc-security.html">Misc, security</a>
      </li>
      <li class="active">
        <a href="http://devslant.com/category/programming.html">Programming</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Android Emulator 2.2 and Android Market</h1>
    <p class="meta">
<time datetime="2010-11-02T17:20:00-07:00" pubdate>Tue 02 November 2010</time>    </p>
</header>

  <div class="entry-content"><p>
One of the drawbacks to not having an actual Android phone (for now) is that I want to see what apps are available, but Google only has a sampling of what’s available on their <a href="http://www.android.com/market/" title="Android Market" target="_blank">web site</a>. I find that rather&nbsp;annoying.
</p>

<p>
Of course, I do have the emulator, and in theory I should be able to do something with that. The emulator does not come with Market access, but there are system images of the virtual devices for v1.5 and&nbsp;1.6.
</p>

<p>
I have the v1.5, and it’s ok, but I wanted to see what was available for v2.2, which now has <a href="http://developer.android.com/resources/dashboard/platform-versions.html" title="android versions" target="_blank">36% of all Android</a> users on&nbsp;it.
</p>

<p>
I ended up using a <span class="caps">ROM</span> image from <a href="http://android.modaco.com/content/google-nexus-one-nexusone-modaco-com/317849/22-oct-r24-modaco-custom-rom-desire-port-for-nexus-one-with-online-kitchen-2-2-froyo/" title="Modaco" target="_blank">modaco</a> for the nexus one (note: link may require&nbsp;registration).
</p>

<p>
So here’s how it all comes together (note, I am using Windows below, but it’s nearly identical under Mac or&nbsp;Linux):
</p>

<ol>
    <li>Create an Android 2.2 <span class="caps">AVD</span></li>
    <li><p>Copy the system.img that comes with the Android <span class="caps">SDK</span> to your new <span class="caps">AVD</span> folder.&nbsp;ex:</p>
<pre>
D:\android-sdk-windows\platforms\android-8\images\system.img
to
C:\Users\drodger\.android\avd\AndMarket22.avd\
</pre></li>
    <li><p>Now you’ll need to start the emulator, but you need to tell it how much internal storage to use (the default isn’t enough). In the <span class="caps">AVD</span> manager, select the New… button by the Hardware section, and scroll down and select the Device ram size property, and then edit the value to 128 (just click on the value). Here’s the command line&nbsp;version:</p>
    <pre>D:\android-sdk-windows\tools\emulator -avd AndMarket22.avd -partition-size 128</pre></li>
    <li>Wait. Wait some more. The emulator is slow to load this one up sometimes. Don’t bother with the next step until the emulator has completely&nbsp;started.</li>
    <li>Now you need to get the build.prop file from within the emulator image, and make a change, and push the change back, like so:
    <pre>D:\android-sdk-windows\tools\adb pull /system/build.prop</pre></li>
    <li>Now edit that file (it will now be in your tools\ directory), and comment out the following line by putting a &#8216;#&#8217; at the beginning of the line:
<pre>
ro.config.nocheckin=yes
#ro.config.nocheckin=yes
</pre></li>
    <li>Now you need to push it back:<pre>D:\android-sdk-windows\tools\adb remount</pre></li>
    <li><pre>D:\android-sdk-windows\tools\adb push build.prop /system/build.prop</pre></li>
    <li>Now you need the <span class="caps">ROM</span> you downloaded from&nbsp;modaco</li>
    <li>Look within the zip, in the \system\app&nbsp;folder</li>
    <li>Copy GoogleServicesFramework.apk and Vending.apk to your tools\&nbsp;directory.</li>
    <li><pre>D:\android-sdk-windows\tools\adb push GoogleServicesFramework.apk /system/app</pre></li>
    <li><pre>D:\android-sdk-windows\tools\adb push Vending.apk /system.app</pre></li>
    <li>Remove the <span class="caps">SDK</span> setup&nbsp;package:</li>
    <li><pre>D:\android-sdk-windows\tools\adb shell rm /system/app/SdkSetup.apk</pre></li>
    <li>Close the&nbsp;emulator</li>
    <li>Delete these files in your <span class="caps">AVD</span> directory: cache.img, userdata.img,&nbsp;userdata-qemu.img</li>
    <li>Ok, now go start the emulator again, and you should be good to&nbsp;go!</li>
</ol>

<p><img alt="emulator" src="images/Capture.jpg"/></p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        Derek Rodger
    </span>
  </span>
<time datetime="2010-11-02T17:20:00-07:00" pubdate>Tue 02 November 2010</time>  <span class="categories">
    <a class='category' href='http://devslant.com/category/programming.html'>Programming</a>
  </span>
  <span class="categories">
    <a class="category" href="http://devslant.com/tag/android.html">android</a>,    <a class="category" href="http://devslant.com/tag/google.html">google</a>,    <a class="category" href="http://devslant.com/tag/emulator.html">emulator</a>,    <a class="category" href="http://devslant.com/tag/market.html">market</a>  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://devslant.com/goodbye-gmail.html">Goodbye Gmail</a>
      </li>
      <li class="post">
          <a href="http://devslant.com/neovim.html">Neovim</a>
      </li>
      <li class="post">
          <a href="http://devslant.com/a-side-of-scala.html">A side of Scala</a>
      </li>
      <li class="post">
          <a href="http://devslant.com/time-for-a-change.html">Time for a Change</a>
      </li>
      <li class="post">
          <a href="http://devslant.com/introducing-cassandra.html">Introducing Cassandra</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://devslant.com/category/learning.html">Learning</a></li>
        <li><a href="http://devslant.com/category/misc-security.html">Misc, Security</a></li>
        <li><a href="http://devslant.com/category/programming.html">Programming</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="http://devslant.com/tag/learning.html">learning</a>,    <a href="http://devslant.com/tag/cassandra.html">cassandra</a>,    <a href="http://devslant.com/tag/gmail.html">gmail</a>,    <a href="http://devslant.com/tag/market.html">market</a>,    <a href="http://devslant.com/tag/android.html">android</a>,    <a href="http://devslant.com/tag/security.html">security</a>,    <a href="http://devslant.com/tag/vim.html">vim</a>,    <a href="http://devslant.com/tag/job.html">job</a>,    <a href="http://devslant.com/tag/mongodb.html">mongodb</a>,    <a href="http://devslant.com/tag/tim-berglund.html">Tim Berglund</a>,    <a href="http://devslant.com/tag/airg.html">airG</a>,    <a href="http://devslant.com/tag/whiteout.html">whiteout</a>,    <a href="http://devslant.com/tag/scala.html">scala</a>,    <a href="http://devslant.com/tag/perl.html">perl</a>,    <a href="http://devslant.com/tag/opscenter.html">opscenter</a>,    <a href="http://devslant.com/tag/openmailbox.html">openmailbox</a>,    <a href="http://devslant.com/tag/protonmail.html">protonmail</a>,    <a href="http://devslant.com/tag/tutanota.html">tutanota</a>,    <a href="http://devslant.com/tag/neovim.html">neovim</a>,    <a href="http://devslant.com/tag/google.html">google</a>,    <a href="http://devslant.com/tag/datastax.html">datastax</a>,    <a href="http://devslant.com/tag/emulator.html">emulator</a>,    <a href="http://devslant.com/tag/redis.html">redis</a>,    <a href="http://devslant.com/tag/nosql.html">nosql</a>  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/drodger">@drodger</a> on GitHub
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'http://devslant.com/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'drodger',
              count: 5,
              skip_forks: false,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="http://devslant.com/theme/js/github.js" type="text/javascript"> </script>
  </section>

    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="https://dbader.org/" target="_blank">Dan Bader</a></li>
            <li><a href="http://python.org/" target="_blank">Python.org</a></li>
            <li><a href="https://djangoproject.com/" target="_blank">Django</a></li>
            <li><a href="http://getpelican.com/" target="_blank">Pelican</a></li>
        </ul>
    </section>
    <section>
        <h1>Blogroll</h1>
        <ul>
            <li><a href="https://github.com/drodger" target="_blank">GitHub</a></li>
            <li><a href="https://www.linkedin.com/in/devslant/" target="_blank">LinkedIn</a></li>
        </ul>
    </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2010&ndash;2015  Derek Rodger &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="http://devslant.com/theme/js/modernizr-2.0.js"></script>
  <script src="http://devslant.com/theme/js/ender.js"></script>
  <script src="http://devslant.com/theme/js/octopress.js" type="text/javascript"></script>
</body>
</html>