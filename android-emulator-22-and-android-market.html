<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>"Android Emulator 2.2 and Android Market" &mdash; DevSlant</title>
  <meta name="author" content="Derek Rodger">






  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="http://devslant.com/favicon.png" rel="icon">

  <link href="http://devslant.com/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <script src="http://devslant.com/theme/js/ender.js"></script>
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://devslant.com/">DevSlant</a></h1>
    <h2>Obviously Obfuscated Originality</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>

<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="devslant.com">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
      <li><a href="http://devslant.com/pages/about.html">About</a></li>
      <li><a href="http://devslant.com/pages/books.html">Books</a></li>
      <li >
        <a href="http://devslant.com/category/learning.html">Learning</a>
      </li>
      <li >
        <a href="http://devslant.com/category/misc.html">Misc</a>
      </li>
      <li class="active">
        <a href="http://devslant.com/category/programming.html">Programming</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">"Android Emulator 2.2 and Android Market"</h1>
    <p class="meta">
<time datetime="2010-11-02T17:20:00-07:00" pubdate>Tue 02 November 2010</time>    </p>
</header>

  <div class="entry-content"><p>
One of the drawbacks to not having an actual Android phone (for now) is that I want to see what apps are available, but Google only has a sampling of what’s available on their <a href="http://www.android.com/market/" title="Android Market" target="_blank">web site</a>. I find that rather annoying.
</p>

<p>
Of course, I do have the emulator, and in theory I should be able to do something with that. The emulator does not come with Market access, but there are system images of the virtual devices for v1.5 and 1.6.
</p>

<p>
I have the v1.5, and it’s ok, but I wanted to see what was available for v2.2, which now has <a href="http://developer.android.com/resources/dashboard/platform-versions.html" title="android versions" target="_blank">36% of all Android</a> users on it.
</p>

<p>
I ended up using a ROM image from <a href="http://android.modaco.com/content/google-nexus-one-nexusone-modaco-com/317849/22-oct-r24-modaco-custom-rom-desire-port-for-nexus-one-with-online-kitchen-2-2-froyo/" title="Modaco" target="_blank">modaco</a> for the nexus one (note: link may require registration).
</p>

<p>
So here’s how it all comes together (note, I am using Windows below, but it’s nearly identical under Mac or Linux):
</p>

<ol>
    <li>Create an Android 2.2 AVD</li>
    <li><p>Copy the system.img that comes with the Android SDK to your new AVD folder. ex:</p>
<pre>
D:\android-sdk-windows\platforms\android-8\images\system.img
to
C:\Users\drodger\.android\avd\AndMarket22.avd\
</pre></li>
    <li><p>Now you’ll need to start the emulator, but you need to tell it how much internal storage to use (the default isn’t enough). In the AVD manager, select the New… button by the Hardware section, and scroll down and select the Device ram size property, and then edit the value to 128 (just click on the value). Here’s the command line version:</p>
    <pre>D:\android-sdk-windows\tools\emulator -avd AndMarket22.avd -partition-size 128</pre></li>
    <li>Wait. Wait some more. The emulator is slow to load this one up sometimes. Don’t bother with the next step until the emulator has completely started.</li>
    <li>Now you need to get the build.prop file from within the emulator image, and make a change, and push the change back, like so:
    <pre>D:\android-sdk-windows\tools\adb pull /system/build.prop</pre></li>
    <li>Now edit that file (it will now be in your tools\ directory), and comment out the following line by putting a '#' at the beginning of the line:
<pre>
ro.config.nocheckin=yes
#ro.config.nocheckin=yes
</pre></li>
    <li>Now you need to push it back:<pre>D:\android-sdk-windows\tools\adb remount</pre></li>
    <li><pre>D:\android-sdk-windows\tools\adb push build.prop /system/build.prop</pre></li>
    <li>Now you need the ROM you downloaded from modaco</li>
    <li>Look within the zip, in the \system\app folder</li>
    <li>Copy GoogleServicesFramework.apk and Vending.apk to your tools\ directory.</li>
    <li><pre>D:\android-sdk-windows\tools\adb push GoogleServicesFramework.apk /system/app</pre></li>
    <li><pre>D:\android-sdk-windows\tools\adb push Vending.apk /system.app</pre></li>
    <li>Remove the SDK setup package:</li>
    <li><pre>D:\android-sdk-windows\tools\adb shell rm /system/app/SdkSetup.apk</pre></li>
    <li>Close the emulator</li>
    <li>Delete these files in your AVD directory: cache.img, userdata.img, userdata-qemu.img</li>
    <li>Ok, now go start the emulator again, and you should be good to go!</li>
</ol>

<p><img alt="emulator" src="http://dl.dropbox.com/u/7133191/Capture.jpg"/></p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        Derek Rodger
    </span>
  </span>
<time datetime="2010-11-02T17:20:00-07:00" pubdate>Tue 02 November 2010</time>  <span class="categories">
    <a class='category' href='http://devslant.com/category/programming.html'>Programming</a>
  </span>
  <span class="categories">
    <a class="category" href="http://devslant.com/tag/android.html">android</a>,    <a class="category" href="http://devslant.com/tag/google.html">google</a>,    <a class="category" href="http://devslant.com/tag/emulator.html">emulator</a>,    <a class="category" href="http://devslant.com/tag/market.html">market</a>  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://devslant.com/small-blog-changes.html">Small blog changes</a>
      </li>
      <li class="post">
          <a href="http://devslant.com/learning-how-to-learn.html">Learning How To Learn</a>
      </li>
      <li class="post">
          <a href="http://devslant.com/you-say-tomato-i-say-pomodoro.html">"You say tomato, I say pomodoro"</a>
      </li>
      <li class="post">
          <a href="http://devslant.com/stay-on-target.html">"Stay on Target"</a>
      </li>
      <li class="post">
          <a href="http://devslant.com/spacethe-final-frontier.html">"Space...The Final Frontier"</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://devslant.com/category/learning.html">Learning</a></li>
        <li><a href="http://devslant.com/category/misc.html">Misc</a></li>
        <li><a href="http://devslant.com/category/programming.html">Programming</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="http://devslant.com/tag/google.html">google</a>,    <a href="http://devslant.com/tag/nosql.html">nosql</a>,    <a href="http://devslant.com/tag/numbers.html">numbers</a>,    <a href="http://devslant.com/tag/learning.html">learning</a>,    <a href="http://devslant.com/tag/market.html">market</a>,    <a href="http://devslant.com/tag/cassandra.html">cassandra</a>,    <a href="http://devslant.com/tag/repetition.html">repetition</a>,    <a href="http://devslant.com/tag/scala.html">scala</a>,    <a href="http://devslant.com/tag/deliberate-practice.html">deliberate practice</a>,    <a href="http://devslant.com/tag/redis.html">redis</a>,    <a href="http://devslant.com/tag/perl.html">perl</a>,    <a href="http://devslant.com/tag/granfondo.html">granfondo</a>,    <a href="http://devslant.com/tag/tim-berglund.html">Tim Berglund</a>,    <a href="http://devslant.com/tag/mongodb.html">mongodb</a>,    <a href="http://devslant.com/tag/android.html">android</a>,    <a href="http://devslant.com/tag/python.html">python</a>,    <a href="http://devslant.com/tag/chunking.html">chunking</a>,    <a href="http://devslant.com/tag/erezlife.html">erezlife</a>,    <a href="http://devslant.com/tag/diffuse.html">diffuse</a>,    <a href="http://devslant.com/tag/php.html">php</a>,    <a href="http://devslant.com/tag/datastax.html">datastax</a>,    <a href="http://devslant.com/tag/trek.html">trek</a>,    <a href="http://devslant.com/tag/airg.html">airG</a>,    <a href="http://devslant.com/tag/job.html">job</a>,    <a href="http://devslant.com/tag/opscenter.html">opscenter</a>,    <a href="http://devslant.com/tag/django.html">django</a>,    <a href="http://devslant.com/tag/emulator.html">emulator</a>,    <a href="http://devslant.com/tag/domane.html">domane</a>  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'http://devslant.com/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'drodger',
              count: 5,
              skip_forks: false,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="http://devslant.com/theme/js/github.js" type="text/javascript"> </script>
  </section>

    <section>
        <h1>Blogroll</h1>
        <ul>
            <li><a href="http://getpelican.com/" target="_blank">Pelican</a></li>
            <li><a href="http://python.org/" target="_blank">Python.org</a></li>
            <li><a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a></li>
        </ul>
    </section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      var widgetId = '438774350494183424',
          domId = 'tweets',
          count = 5,
          hyperlinkUrlsPlus = true,
          showUserPhoto = false,
          timeOfTweet = true,
          dateFormat = 'default',
          showRetweets = false,
          customOutputFn = null,
          showReplyRetweetButtons = false;

      twitterFetcher.fetch(
        widgetId,
        domId,
        count,
        hyperlinkUrlsPlus,
        showUserPhoto,
        timeOfTweet,
        dateFormat,
        showRetweets,
        customOutputFn,
        showReplyRetweetButtons
      );
    });
  </script>
  <script src="/theme/js/twitter.js" type="text/javascript"> </script>
    <p>Follow <a href="http://twitter.com/devslant">@devslant</a></p>
</section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2010&ndash;2015  Derek Rodger &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="http://devslant.com/theme/js/modernizr-2.0.js"></script>
  <script src="http://devslant.com/theme/js/octopress.js" type="text/javascript"></script>
</body>
</html>